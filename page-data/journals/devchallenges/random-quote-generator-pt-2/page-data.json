{"componentChunkName":"component---src-layouts-article-layout-jsx","path":"/journals/devchallenges/random-quote-generator-pt-2/","result":{"data":{"site":{"siteMetadata":{"longDescription":"Membahas programming, Tutorial Javascript, Software opensource, dan trend teknologi dan IT di Indonesia dengan santai"}},"markdownRemark":{"html":"<h2>Quote Service</h2>\n<p>Sebelum membuat tampilannya, mari tulis modul webservice untuk mengatur fetching data di setiap endpoints <a href=\"https://pprathameshmore.github.io/QuoteGarden/\">Quote Garden API</a>, agar nantinya lebih mudah diolah.</p>\n<p>Buatlah file dan folder sesuai dengan skema ini:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  src/\n    lib/\n      QuoteService/\n        __test__/\n          fetchByAuthor.test.ts\n          fetchRandomQuotes.test.ts\n        fetchByAuthor.ts\n        fetchRandomQuotes.ts\n        interfaces.ts</code></pre></div>\n<h3>Interfaces &#x26; Data Types</h3>\n<p>Hal pertama yang dilakukan adalah, check laman dokumentasi <a href=\"https://pprathameshmore.github.io/QuoteGarden/\">Quote Garden API</a> ini</p>\n<p>Setelah membaca dokumentasi, info penting yang didapatkan adalah:</p>\n<p>Terdapat 4 buah endpoints yaitu:</p>\n<ul>\n<li>\n<p>Get random quotes</p>\n<ul>\n<li>Memiliki response berisikan <strong>list of quotes</strong></li>\n<li>URL: <code class=\"language-text\">https://quote-garden.herokuapp.com/api/v3/quotes/random</code>.</li>\n<li>tidak memiliki request parameters</li>\n</ul>\n</li>\n<li>\n<p>Get all quotes</p>\n<ul>\n<li>Memiliki response berisikan <strong>list of quotes</strong></li>\n<li>URL: <code class=\"language-text\">https://quote-garden.herokuapp.com/api/v3/quotes</code>.</li>\n<li>\n<p>Memiliki Request parameters, yang akan dibuat interface <code class=\"language-text\">IQuoteRequestParams</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IQuoteRequestParams</span> <span class=\"token punctuation\">{</span>\nauthor<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\ngenre<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\nquery<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\npage<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\nlimit<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>Keterangan:</p>\n<ul>\n<li>author: string menyatakan penulis quote</li>\n<li>genre: string menyatakan genre dari quote</li>\n<li>query: string keyword pencarian</li>\n<li>page: bilangan menyatakan target halaman</li>\n<li>limit: bilangan menyatakan batas dari quote yang diambil (default: 10)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Get all quote genres</p>\n<ul>\n<li>Memiliki response berisikan <strong>list of string</strong> yang menyatakan quote genre</li>\n<li>URL: <code class=\"language-text\">https://quote-garden.herokuapp.com/api/v3/genres</code>.</li>\n<li>tidak memiliki request parameters</li>\n</ul>\n</li>\n<li>\n<p>Get all quote authors</p>\n<ul>\n<li>Memiliki response berisikan <strong>list of string</strong> yang menyatakan quote authors</li>\n<li>URL: <code class=\"language-text\">https://quote-garden.herokuapp.com/api/v3/authors</code>.</li>\n<li>tidak memiliki request parameters</li>\n</ul>\n</li>\n</ul>\n<p>Dari keempat endpoints tadi, ada dua jenis response yang akan dihasilkan, yaitu:</p>\n<ul>\n<li>\n<p>response yang berisikan <code class=\"language-text\">list of quotes</code> sebagai di dalam field <code class=\"language-text\">data</code> yang memiliki skema object:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"5eb17aaeb69dc744b4e72a4a\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"quoteText\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"The first rule of any technology used in a business is that automation applied to an efficient operation will magnify the efficiency. The second is that automation applied to an inefficient operation will magnify the inefficiency.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"quoteAuthor\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Bill Gates\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"quoteGenre\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"business\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"__v\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dapat kita definisikan type nya sebagai interface <code class=\"language-text\">IQuote</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">IQuote</span> <span class=\"token punctuation\">{</span>\n_id<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\nquoteText<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\nquoteAuthor<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\nquoteGenre<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n__v<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>response yang berisikan <code class=\"language-text\">array of string</code> di dalam field data.</li>\n</ul>\n<p>Untuk skema response tetap sama, yaitu:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"statusCode\"</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Quotes\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"pagination\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"currentPage\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"nextPage\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"totalPages\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"totalQuotes\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"data\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token comment\">/* array of quotes / array of string*/</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Untuk challenge kali ini, yang hanya digunakan adalah response yang memiliki nilai quote pada field <code class=\"language-text\">data</code>.</p>\n<p>Berikut sedikit penjelasan tentang skema response yang dihasilkan endpoint Get all quotes dan get Random quotes</p>\n<ul>\n<li><code class=\"language-text\">statusCode</code> yang menyatakan <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status\">http request status</a>.</li>\n<li><code class=\"language-text\">message</code> string berisikan pesan dari hasil request.</li>\n<li><code class=\"language-text\">totalQuotes</code> number yang menyatakan jumlah dari quotes yang ada.</li>\n<li>\n<p><code class=\"language-text\">pagination</code> object yang digunakan untuk menyimpan informasi navigasi halaman yang sedang aktif. Namun pada endpoint get random quotes, nilai semua fields yang ada adalah <code class=\"language-text\">null</code>.</p>\n<p>Dapat didefinisikan sebagai interface <code class=\"language-text\">IQuotePagination</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IQuotePagination</span> <span class=\"token punctuation\">{</span>\ncurrentPage<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\nnextPage<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\ntotalPages<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<p>Untuk skema response akan akan di definisikan sebagai interface berikut:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IQuoteResponse</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  statusCode<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  error<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  pagination<span class=\"token operator\">?</span><span class=\"token operator\">:</span> IQuotePagination<span class=\"token punctuation\">;</span>\n  totalQuotes<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  data<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Catatan:</p>\n<ul>\n<li>T dalam interface <code class=\"language-text\">IQuoteResponse</code> digunakan untuk menampung type yang akan di inject kedalam interface. Kunjungi <a href=\"https://www.typescriptlang.org/docs/handbook/generics.html\">laman generic interface in typescript</a> untuk lebih lanjut.</li>\n</ul>\n<p>Buat alias untuk Quote response dengan menggunakan interface <code class=\"language-text\">IResponse</code> serta masukan type yang diperlukan:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> IQuoteResponse <span class=\"token operator\">=</span> IResponse<span class=\"token operator\">&lt;</span><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>IQuote<span class=\"token operator\">>></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Hasil akhir dari file <code class=\"language-text\">interface.ts</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IQuoteRequestParams</span> <span class=\"token punctuation\">{</span>\n  author<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  genre<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  query<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  page<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  limit<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IQuotePagination</span> <span class=\"token punctuation\">{</span>\n  currentPage<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  nextPage<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n  totalPages<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IQuote</span> <span class=\"token punctuation\">{</span>\n  _id<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  quoteText<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  quoteAuthor<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  quoteGenre<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  __v<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IResponse</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  statusCode<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  error<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  pagination<span class=\"token operator\">?</span><span class=\"token operator\">:</span> IQuotePagination<span class=\"token punctuation\">;</span>\n  totalQuotes<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  data<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> IQuoteResponse <span class=\"token operator\">=</span> IResponse<span class=\"token operator\">&lt;</span><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>IQuote<span class=\"token operator\">>></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Selanjutnya, dilanjutkan dengan menulis functions untuk calling api dengan memanfaatkan http client (axios).</p>\n<p>Keep in touch for the updates ya!\nCheers 🥂,</p>","id":"e94ca14a-f7f5-54d1-94ec-cbfb2e0e3dfe","fields":{"slug":"/journals/devchallenges/random-quote-generator-pt-2/"},"frontmatter":{"title":"Random Quote Generator - 2","date":"2021-02-08T00:00:00.000Z","description":"Solusi dari tantangan devchallenges.io - random quote generator bagian Quote Service, Interfaces & data types","heroImage":"https://images.unsplash.com/photo-1511465390398-532913e8328d?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1490&q=80","series":"journal","photographer":"Mert Talay","unsplashAccount":"merttly"}}},"pageContext":{"slug":"/journals/devchallenges/random-quote-generator-pt-2/"}}}